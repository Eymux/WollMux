#!/bin/sh
JAR_FILE="/usr/share/java/WollMuxBar.jar"
case "_$1" in
  _--*) ;;
  _) ;;
  *) set -- --load "$@" ;;
esac

FIFO="/tmp/wollmuxbar_$USER"
if [ ! -p $FIFO ]; then
  mkfifo $FIFO
  set -- --firstrun "$@"
fi

# If no office installation is found in the path and the install location is
# not specified by the user try to autodetect installation paths in /opt
if ! `which soffice > /dev/null` && [ "x$UNO_PATH" = "x" ]; then
	for officepath in /opt/libreoffice*/ /opt/openoffice.org*/; do
		if [ -e "$officepath/program/soffice" ]; then
			export UNO_PATH="$officepath/program"
			break
		fi
	done
fi


exec java -jar "${JAR_FILE}" --quickstarter --fifo $FIFO "$@"
